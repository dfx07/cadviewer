<UserControl x:Class="CadViewer.View.OpenGLView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:i="http://schemas.microsoft.com/xaml/behaviors"
             xmlns:local="clr-namespace:CadViewer.View"
             xmlns:com="clr-namespace:CadViewer.Common"
             IsHitTestVisible="True"
             mc:Ignorable="d"
             IsTabStop="True"
             d:DesignHeight="640" d:DesignWidth="640">

    <Grid Style="{StaticResource ResourceKey=OpenGLViewStyle}">
        <Border x:Name="OpenGLViewPanel" BorderBrush="Black" Background="#e6e7e8" BorderThickness="1" CornerRadius="5" Opacity="0.5" Focusable="True">
            <Border.FocusVisualStyle>
                <Style TargetType="Control">
                    <Setter Property="BorderThickness" Value="1"/>
                </Style>
            </Border.FocusVisualStyle>
            <i:Interaction.Triggers>
                <i:EventTrigger EventName="KeyDown">
                    <i:InvokeCommandAction Command="{Binding OpenGLKeyDownCommand, RelativeSource={RelativeSource AncestorType=UserControl}}" PassEventArgsToCommand="True" />
                </i:EventTrigger>
                <i:EventTrigger EventName="KeyUp">
                    <i:InvokeCommandAction Command="{Binding OpenGLKeyUpCommand, RelativeSource={RelativeSource AncestorType=UserControl}}" PassEventArgsToCommand="True" />
                </i:EventTrigger>
            </i:Interaction.Triggers>
            <Label HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
                <i:Interaction.Triggers>

                    <!--Mouse click events-->
                    <i:EventTrigger EventName="MouseEnter">
                        <i:InvokeCommandAction Command="{Binding OpenGLMouseEnterCommand, RelativeSource={RelativeSource AncestorType=UserControl}}"
                        PassEventArgsToCommand="True">
                        </i:InvokeCommandAction>
                    </i:EventTrigger>
                    <i:EventTrigger EventName="MouseDown">
                        <i:InvokeCommandAction Command="{Binding _MouseDownCommand, RelativeSource={RelativeSource AncestorType=UserControl}}"
                           PassEventArgsToCommand="True" />
                    </i:EventTrigger>
                    <i:EventTrigger EventName="MouseUp">
                        <i:InvokeCommandAction Command="{Binding _MouseUpCommand, RelativeSource={RelativeSource AncestorType=UserControl}}"
                           PassEventArgsToCommand="True" />
                    </i:EventTrigger>
                    <i:EventTrigger EventName="MouseMove">
                        <i:InvokeCommandAction Command="{Binding _MouseMoveCommand, RelativeSource={RelativeSource AncestorType=UserControl}}"
                        PassEventArgsToCommand="True">
                        </i:InvokeCommandAction>
                    </i:EventTrigger>
                </i:Interaction.Triggers>

                <!--UI Handler-->
                <Label.Style>
                    <Style TargetType="Label">
                        <Style.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="FocusManager.FocusedElement" Value="{Binding ElementName=OpenGLViewPanel}" />
                            </Trigger>
                        </Style.Triggers>
                    </Style>
                </Label.Style>

                <!--OpenGLView-->
                <ContentPresenter Content="{Binding OpenGLContent, RelativeSource={RelativeSource AncestorType=UserControl}}">
                </ContentPresenter>
            </Label>
        </Border>
    </Grid>

</UserControl>
